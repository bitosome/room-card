{"code":"var BitosomeRoomCard_1;\r\nimport { __decorate } from \"tslib\";\r\n/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { LitElement, html, css, nothing } from 'lit';\r\nimport { customElement, property, state } from 'lit/decorators';\r\nimport { handleAction } from 'custom-card-helpers';\r\nimport { actionHandler } from './action-handler-directive';\r\nimport { CARD_VERSION } from './const';\r\nfunction clone(obj) {\r\n    return JSON.parse(JSON.stringify(obj));\r\n}\r\nlet BitosomeRoomCard = BitosomeRoomCard_1 = class BitosomeRoomCard extends LitElement {\r\n    static getStubConfig() {\r\n        return {\r\n            title: 'Living room',\r\n            tile_height: 80,\r\n            badge_size: 22,\r\n            badge_icon_size: 14,\r\n            main_icon_size: 48,\r\n            chip_font_size: 12,\r\n            card_shadow_color: '#000000',\r\n            card_shadow_intensity: 0.5,\r\n            unavailable_pulse_color: '#ff3b30',\r\n            header: {\r\n                main: {\r\n                    tap_entity: 'switch.living_room_light_group',\r\n                    main_name: 'Living room',\r\n                    main_icon: 'mdi:sofa-outline',\r\n                    temp_sensor: 'sensor.kitchen_living_room_temparature_average',\r\n                    humidity_sensor: 'sensor.kitchen_living_room_humidity_average',\r\n                    badges: [],\r\n                },\r\n                ac: { entity: 'climate.living_room_ac' },\r\n                thermostat: { entity: 'climate.thermostat_5_7_group' },\r\n            },\r\n            switch_rows: [],\r\n        };\r\n    }\r\n    setConfig(config) {\r\n        const c = clone(config || BitosomeRoomCard_1.getStubConfig());\r\n        c.header = c.header || {};\r\n        if (!Array.isArray(c.switch_rows))\r\n            c.switch_rows = [];\r\n        this._config = c;\r\n    }\r\n    getCardSize() {\r\n        return 6;\r\n    }\r\n    render() {\r\n        var _a, _b, _c, _d;\r\n        if (!this._config)\r\n            return nothing;\r\n        const c = Object.assign(Object.assign({}, BitosomeRoomCard_1.getStubConfig()), this._config);\r\n        // Do NOT merge header with stub defaults; respect user omission of AC/Thermostat\r\n        const h = (c.header || {});\r\n        const tileH = Number(c.tile_height) || 80;\r\n        const badgeSize = Number(c.badge_size) || 22;\r\n        const badgeIcon = Number(c.badge_icon_size) || 14;\r\n        // Allow header-level override for main icon size\r\n        const headerMainIconSize = Number((_b = (_a = h) === null || _a === void 0 ? void 0 : _a.main_icon_size) !== null && _b !== void 0 ? _b : (_c = h) === null || _c === void 0 ? void 0 : _c.maicon_size);\r\n        const mainIcon = Number.isFinite(headerMainIconSize) && headerMainIconSize > 0\r\n            ? headerMainIconSize\r\n            : (Number(c.main_icon_size) || 48);\r\n        const panelShadowColor = this._rgbaFromColor(c.card_shadow_color, c.card_shadow_intensity);\r\n        const chipFont = Number(c.chip_font_size) || 12;\r\n        const unavailColor = c.unavailable_pulse_color || '#ff3b30';\r\n        const hasUnavail = this._hasAnyUnavailable(c, h);\r\n        const unavailWeak = this._rgbaFromColor(unavailColor, 0.18);\r\n        const unavailStrong = this._rgbaFromColor(unavailColor, 0.36);\r\n        return html `\n      <ha-card class=${hasUnavail ? 'unavailable' : ''}\n               style=${`--panel-shadow-color:${hasUnavail ? unavailWeak : panelShadowColor}; --unavail-weak:${unavailWeak}; --unavail-strong:${unavailStrong}`}\n               .header=${((_d = this._config) === null || _d === void 0 ? void 0 : _d.title) || undefined}>\n        <div class=\"metrics\" style=${`--tile-h:${tileH}px; --badge:${badgeSize}px; --badge-icon:${badgeIcon}px; --main-icon-size:${mainIcon}px; --chip-font-size:${chipFont}px;`}>\n          <div class=\"root\">\n            ${this._renderHeaderRow(h)}\n            ${this._renderSwitchRows(c.switch_rows)}\n          </div>\n        </div>\n      </ha-card>\n    `;\r\n    }\r\n    _renderHeaderRow(h) {\r\n        const mainRaw = h.main || {};\r\n        const main = {\r\n            tap_entity: mainRaw.tap_entity,\r\n            hold_entity: mainRaw.hold_entity || mainRaw.tap_entity,\r\n            light_group_entity: mainRaw.light_group_entity,\r\n            name: mainRaw.main_name || mainRaw.name,\r\n            icon: mainRaw.main_icon || mainRaw.icon,\r\n            temp_sensor: mainRaw.temp_sensor,\r\n            humidity_sensor: mainRaw.humidity_sensor,\r\n            badges: Array.isArray(mainRaw.badges) ? mainRaw.badges : [],\r\n            tap_action: mainRaw.tap_action,\r\n            hold_action: mainRaw.hold_action,\r\n            double_tap_action: mainRaw.double_tap_action,\r\n        };\r\n        const ac = h.ac || {};\r\n        const thermostat = h.thermostat || {};\r\n        const showAC = !!(ac === null || ac === void 0 ? void 0 : ac.entity);\r\n        const showThermo = !!(thermostat === null || thermostat === void 0 ? void 0 : thermostat.entity);\r\n        const cls = !showAC && !showThermo ? 'header-row only-main' : (showAC && showThermo ? 'header-row' : 'header-row main-plus-one');\r\n        return html `\n      <div class=${cls}>\n        ${this._renderMainTile(main)}\n        ${showAC ? this._renderACTile(ac.entity, ac) : nothing}\n        ${showThermo ? this._renderThermoTile(thermostat.entity, thermostat) : nothing}\n      </div>\n    `;\r\n    }\r\n    _renderMainTile(h) {\r\n        var _a;\r\n        const icon = h.icon || 'mdi:sofa-outline';\r\n        const name = h.name || '';\r\n        const tval = this._fmt2(h.temp_sensor, 2, '°');\r\n        const hval = this._fmt2(h.humidity_sensor, 2, '%');\r\n        const hasHold = true; // main supports hold by default (for more-info)\r\n        const hasDbl = !!((h === null || h === void 0 ? void 0 : h.double_tap_action) || ((_a = this._config) === null || _a === void 0 ? void 0 : _a.double_tap_action));\r\n        const ctrl = h.light_group_entity || h.tap_entity || h.entity;\r\n        const isOn = this._isOn(ctrl);\r\n        const bulbBg = isOn ? 'linear-gradient(135deg,#ffcf57,#ffb200)' : 'rgba(0,0,0,0.06)';\r\n        const bulbIconColor = isOn ? '#ffffff' : 'var(--secondary-text-color)';\r\n        return html `\n      <div class=\"main-tile\"\n           @action=${(ev) => this._onMainAction(ev, h, h.tap_entity, h.hold_entity, h.light_group_entity)}\n           .actionHandler=${actionHandler({ hasHold, hasDoubleClick: hasDbl })}\n           role=\"button\" tabindex=\"0\">\n        <ha-icon class=\"main-icon\" .icon=${icon}></ha-icon>\n        <div class=\"chip-tr\" data-role=\"chip\">\n          <ha-icon icon=\"mdi:thermometer\" class=\"chip-ico\"></ha-icon>\n          <span class=\"tval\">${tval}</span>\n          <span style=\"opacity:.6;\">|</span>\n          <ha-icon icon=\"mdi:water-percent\" class=\"chip-ico\"></ha-icon>\n          <span class=\"hval\">${hval}</span>\n        </div>\n        <div class=\"main-badges-br\" data-role=\"badges\">\n          <div class=\"badge\" style=${`background:${bulbBg}`}>\n            <ha-icon .icon=${'mdi:lightbulb'} style=${`color:${bulbIconColor}`}></ha-icon>\n          </div>\n        </div>\n        <div class=\"main-name\">${name}</div>\n      </div>\n    `;\r\n    }\r\n    _renderACTile(entityId, _cfg) {\r\n        var _a, _b, _c;\r\n        const mode = (((_c = (_b = (_a = this.hass) === null || _a === void 0 ? void 0 : _a.states) === null || _b === void 0 ? void 0 : _b[entityId]) === null || _c === void 0 ? void 0 : _c.state) || '').toLowerCase();\r\n        const active = !!mode && mode !== 'off';\r\n        const { bg, icon } = this._acBadge(mode);\r\n        const fanStyle = `color:${this._acModeColor(mode)}; ${active ? 'animation:spin 1.5s linear infinite;' : ''}`;\r\n        const pulse = this._acPulseColors(mode);\r\n        const tileStyle = `${active ? 'animation:activePulse 2.4s ease-in-out infinite;' : ''} --pulse-weak:${pulse.weak}; --pulse-strong:${pulse.strong};`;\r\n        return html `\n      <div class=\"square ac-tile\" style=${tileStyle}\n           @action=${(ev) => this._onACAction(ev, entityId)}\n           .actionHandler=${actionHandler({ hasHold: true, hasDoubleClick: false })}\n           role=\"button\" tabindex=\"0\">\n        <div class=\"badge badge-tr\" style=${`background:${bg}`}> \n          <ha-icon .icon=${icon} style=\"color:#fff\"></ha-icon>\n        </div>\n        <div class=\"center-xy\">\n          <ha-icon class=\"ac-fan\" icon=\"mdi:fan\" style=${fanStyle}></ha-icon>\n        </div>\n      </div>\n    `;\r\n    }\r\n    _renderThermoTile(entityId, _cfg) {\r\n        var _a, _b, _c, _d, _e, _f, _g, _h;\r\n        const st = (_b = (_a = this.hass) === null || _a === void 0 ? void 0 : _a.states) === null || _b === void 0 ? void 0 : _b[entityId];\r\n        const target = (_f = (_d = (_c = st === null || st === void 0 ? void 0 : st.attributes) === null || _c === void 0 ? void 0 : _c.temperature) !== null && _d !== void 0 ? _d : (_e = st === null || st === void 0 ? void 0 : st.attributes) === null || _e === void 0 ? void 0 : _e.target_temp) !== null && _f !== void 0 ? _f : (_g = st === null || st === void 0 ? void 0 : st.attributes) === null || _g === void 0 ? void 0 : _g.target_temperature;\r\n        const tStr = this._fmtNumber(target, 1) + '°';\r\n        const hvacAction = (((_h = st === null || st === void 0 ? void 0 : st.attributes) === null || _h === void 0 ? void 0 : _h.hvac_action) || '').toLowerCase();\r\n        const state = ((st === null || st === void 0 ? void 0 : st.state) || '').toLowerCase();\r\n        const color = state === 'off' ? 'gray' : (hvacAction === 'heating' || state === 'heating') ? '#ff7043' : '#66bb6a';\r\n        const tileStyle = `${(hvacAction === 'heating' || state === 'heating') ? 'animation:heatingGlow 2.4s ease-in-out infinite;' : ''}`;\r\n        return html `\n      <div class=\"square thermo-tile\" style=${tileStyle}\n           @action=${(ev) => this._onThermoAction(ev, entityId)}\n           .actionHandler=${actionHandler({ hasHold: true, hasDoubleClick: false })}\n           role=\"button\" tabindex=\"0\">\n        <div class=\"temp-chip-tr\">\n          <div class=\"temp-pill\"><span class=\"thermo-target\">${tStr}</span></div>\n        </div>\n        <div class=\"center-xy\">\n          <ha-icon class=\"thermo-icon\" icon=\"mdi:thermostat\" style=${`color:${color}`}></ha-icon>\n        </div>\n      </div>\n    `;\r\n    }\r\n    _onMainAction(ev, tileCfg, tap, hold, lightGroup) {\r\n        const action = (ev.detail && ev.detail.action) || 'tap';\r\n        // Tile-level actions override card-level\r\n        if (this.hass && tileCfg && (tileCfg.tap_action || tileCfg.hold_action || tileCfg.double_tap_action)) {\r\n            handleAction(this, this.hass, tileCfg, action);\r\n            return;\r\n        }\r\n        // If configured, use boilerplate handleAction against card-level actions\r\n        if (this.hass && this._config && (this._config.tap_action || this._config.hold_action || this._config.double_tap_action)) {\r\n            handleAction(this, this.hass, this._config, action);\r\n            return;\r\n        }\r\n        // Switch-like behavior for main tile\r\n        if (action === 'hold')\r\n            this._openMoreInfo(hold || tap);\r\n        else\r\n            this._toggleGeneric(lightGroup || tap);\r\n    }\r\n    _onACAction(ev, entity) {\r\n        const act = (ev.detail && ev.detail.action) || 'tap';\r\n        if (act === 'hold')\r\n            this._openMoreInfo(entity);\r\n        else\r\n            this._acToggle(entity);\r\n    }\r\n    _onThermoAction(ev, entity) {\r\n        const act = (ev.detail && ev.detail.action) || 'tap';\r\n        if (act === 'hold')\r\n            this._openMoreInfo(entity);\r\n        else\r\n            this._thermoToggle(entity);\r\n    }\r\n    _renderSwitchRows(rows) {\r\n        if (!rows || !rows.length)\r\n            return nothing;\r\n        return html `${rows.map((row) => {\r\n            const r = row;\r\n            const items = Array.isArray(row) ? row : (Array.isArray(r === null || r === void 0 ? void 0 : r.row) ? r.row : []);\r\n            const cols = Math.max(1, items.length || 1);\r\n            return html `<div class=\"switch-row\" style=${`--cols:${cols}`}>${items.map((sw) => this._renderSwitchTile(sw))}</div>`;\r\n        })}`;\r\n    }\r\n    _renderSwitchTile(sw) {\r\n        const tap = (sw === null || sw === void 0 ? void 0 : sw.entity) || '';\r\n        const hold = (sw === null || sw === void 0 ? void 0 : sw.hold_entity) || (sw === null || sw === void 0 ? void 0 : sw.entity) || '';\r\n        const icon = (sw === null || sw === void 0 ? void 0 : sw.icon) || '';\r\n        const name = (sw === null || sw === void 0 ? void 0 : sw.name) || '';\r\n        const type = String((sw === null || sw === void 0 ? void 0 : sw.type) || 'switch').toLowerCase();\r\n        const isSmart = type === 'smart_plug';\r\n        const on = this._isOn(tap);\r\n        const iconSize = (sw === null || sw === void 0 ? void 0 : sw.icon_size) || (sw === null || sw === void 0 ? void 0 : sw['icon-size']) || (sw === null || sw === void 0 ? void 0 : sw['icon_size']);\r\n        const nameWeight = (sw === null || sw === void 0 ? void 0 : sw.font_weight) || (sw === null || sw === void 0 ? void 0 : sw['font-weight']);\r\n        const nameSize = (sw === null || sw === void 0 ? void 0 : sw.font_size) || (sw === null || sw === void 0 ? void 0 : sw['font-size']);\r\n        const toPx = (v) => (v === undefined || v === null || v === '') ? '' : (String(v).match(/px|em|rem|%$/) ? String(v) : `${Number(v)}px`);\r\n        const iconDim = toPx(iconSize);\r\n        const iconStyle = iconDim ? `width:${iconDim};height:${iconDim};--mdc-icon-size:${iconDim};` : '';\r\n        const nameStyle = `${nameWeight ? `font-weight:${nameWeight};` : ''}${nameSize ? `font-size:${toPx(nameSize)};` : ''}`;\r\n        const cls = `switch-tile ${isSmart ? 'smart' : ''} ${on ? 'on' : ''}`;\r\n        return html `\n      <div class=${cls}\n           @action=${(ev) => this._onSwitchAction(ev, sw)}\n           .actionHandler=${actionHandler({ hasHold: true, hasDoubleClick: !!(sw === null || sw === void 0 ? void 0 : sw.double_tap_action) })}\n           role=\"button\" tabindex=\"0\">\n        <div class=\"tile-inner\">\n          ${icon ? html `<ha-icon class=\"switch-icon\" .icon=${icon} style=${iconStyle}></ha-icon>` : nothing}\n          ${name ? html `<div class=\"name\" style=${nameStyle}>${name}</div>` : nothing}\n        </div>\n      </div>\n    `;\r\n    }\r\n    // (Removed) Embedded Lovelace cards functionality\r\n    _onSwitchAction(ev, sw) {\r\n        const act = (ev.detail && ev.detail.action) || 'tap';\r\n        if (this.hass && sw && (sw.tap_action || sw.hold_action || sw.double_tap_action)) {\r\n            handleAction(this, this.hass, sw, act);\r\n            return;\r\n        }\r\n        const tap = sw === null || sw === void 0 ? void 0 : sw.entity;\r\n        const hold = (sw === null || sw === void 0 ? void 0 : sw.hold_entity) || tap;\r\n        if (act === 'hold')\r\n            this._openMoreInfo(hold || tap);\r\n        else\r\n            this._toggleGeneric(tap);\r\n    }\r\n    _fmt2(entityId, digits, suffix) {\r\n        if (!entityId || !this.hass)\r\n            return '—' + (suffix || '');\r\n        const st = this.hass.states[entityId];\r\n        if (!st || st.state === '' || st.state === 'unknown' || st.state === 'unavailable')\r\n            return '—' + (suffix || '');\r\n        const n = Number(st.state);\r\n        return Number.isFinite(n) ? n.toFixed(digits) + (suffix || '') : String(st.state) + (suffix || '');\r\n    }\r\n    _fmtNumber(v, digits) {\r\n        if (v === undefined || v === null || v === '' || v === 'unknown' || v === 'unavailable')\r\n            return '—';\r\n        const n = Number(v);\r\n        return Number.isFinite(n) ? n.toFixed(digits) : String(v);\r\n    }\r\n    _acModeColor(mode) {\r\n        if (!mode || mode === 'off')\r\n            return 'gray';\r\n        if (mode.includes('cool'))\r\n            return '#00aaff';\r\n        if (mode.includes('heat'))\r\n            return '#ff7043';\r\n        if (mode.includes('dry'))\r\n            return '#ffca28';\r\n        if (mode.includes('fan'))\r\n            return '#66bb6a';\r\n        if (mode.includes('auto'))\r\n            return '#26c6da';\r\n        return 'var(--paper-item-icon-color)';\r\n    }\r\n    _acBadge(mode) {\r\n        if (!mode || mode === 'off')\r\n            return { bg: 'rgba(158,158,158,0.95)', icon: 'mdi:power' };\r\n        if (mode.includes('cool'))\r\n            return { bg: '#00aaff', icon: 'mdi:snowflake' };\r\n        if (mode.includes('heat'))\r\n            return { bg: '#ff7043', icon: 'mdi:fire' };\r\n        if (mode.includes('dry'))\r\n            return { bg: '#ffca28', icon: 'mdi:water-percent' };\r\n        if (mode.includes('fan'))\r\n            return { bg: '#66bb6a', icon: 'mdi:fan' };\r\n        if (mode.includes('auto'))\r\n            return { bg: '#26c6da', icon: 'mdi:autorenew' };\r\n        return { bg: 'rgba(0,0,0,0.06)', icon: 'mdi:air-conditioner' };\r\n    }\r\n    _acPulseColors(mode) {\r\n        if (mode === null || mode === void 0 ? void 0 : mode.includes('cool'))\r\n            return { weak: 'rgba(0,170,255,0.12)', strong: 'rgba(0,170,255,0.26)' };\r\n        if (mode === null || mode === void 0 ? void 0 : mode.includes('heat'))\r\n            return { weak: 'rgba(255,112,67,0.12)', strong: 'rgba(255,112,67,0.26)' };\r\n        if (mode === null || mode === void 0 ? void 0 : mode.includes('dry'))\r\n            return { weak: 'rgba(255,202,40,0.12)', strong: 'rgba(255,202,40,0.26)' };\r\n        if (mode === null || mode === void 0 ? void 0 : mode.includes('fan'))\r\n            return { weak: 'rgba(102,187,106,0.12)', strong: 'rgba(102,187,106,0.26)' };\r\n        if (mode === null || mode === void 0 ? void 0 : mode.includes('auto'))\r\n            return { weak: 'rgba(38,198,218,0.12)', strong: 'rgba(38,198,218,0.26)' };\r\n        return { weak: 'rgba(0,0,0,0.06)', strong: 'rgba(0,0,0,0.12)' };\r\n    }\r\n    _openMoreInfo(entityId) {\r\n        if (!entityId)\r\n            return;\r\n        this.dispatchEvent(new CustomEvent('hass-more-info', {\r\n            detail: { entityId }, bubbles: true, composed: true,\r\n        }));\r\n    }\r\n    _acToggle(entityId) {\r\n        if (!entityId || !this.hass)\r\n            return;\r\n        const st = this.hass.states[entityId];\r\n        const mode = ((st === null || st === void 0 ? void 0 : st.state) || '').toLowerCase();\r\n        const on = !!mode && mode !== 'off';\r\n        this.hass.callService('climate', on ? 'turn_off' : 'turn_on', { entity_id: entityId });\r\n    }\r\n    _thermoToggle(entityId) {\r\n        if (!entityId || !this.hass)\r\n            return;\r\n        const st = this.hass.states[entityId];\r\n        const mode = ((st === null || st === void 0 ? void 0 : st.state) || '').toLowerCase();\r\n        const next = (mode === 'off') ? 'heat' : 'off';\r\n        this.hass.callService('climate', 'set_hvac_mode', { entity_id: entityId, hvac_mode: next });\r\n    }\r\n    _toggleGeneric(entityId) {\r\n        if (!entityId || !this.hass)\r\n            return;\r\n        const domain = entityId.split('.')[0];\r\n        const svc = (domain === 'switch' || domain === 'light') ? `${domain}.toggle` : 'homeassistant.toggle';\r\n        const [d, s] = svc.split('.');\r\n        this.hass.callService(d, s, { entity_id: entityId });\r\n    }\r\n    _isOn(entityId) {\r\n        if (!entityId || !this.hass)\r\n            return false;\r\n        const st = this.hass.states[entityId];\r\n        return ((st === null || st === void 0 ? void 0 : st.state) || '').toLowerCase() === 'on';\r\n    }\r\n    _rgbaFromColor(color, alpha = 0.5) {\r\n        const a = Math.max(0, Math.min(1, Number(alpha) || 0));\r\n        if (!color || typeof color !== 'string')\r\n            return `rgba(0,0,0,${a})`;\r\n        const c = color.trim();\r\n        if (c.startsWith('rgba(') || c.startsWith('rgb(') || c.startsWith('hsl(') || c.startsWith('var('))\r\n            return c;\r\n        const hex = c.replace('#', '');\r\n        const to255 = (h) => parseInt(h, 16);\r\n        if (hex.length === 3) {\r\n            const r = to255(hex[0] + hex[0]), g = to255(hex[1] + hex[1]), b = to255(hex[2] + hex[2]);\r\n            return `rgba(${r},${g},${b},${a})`;\r\n        }\r\n        if (hex.length >= 6) {\r\n            const r = to255(hex.slice(0, 2)), g = to255(hex.slice(2, 4)), b = to255(hex.slice(4, 6));\r\n            return `rgba(${r},${g},${b},${a})`;\r\n        }\r\n        return `rgba(0,0,0,${a})`;\r\n    }\r\n    _hasAnyUnavailable(c, h) {\r\n        if (!this.hass)\r\n            return false;\r\n        const ids = [];\r\n        const mainRaw = h.main || {};\r\n        const main = {\r\n            tap_entity: mainRaw.tap_entity,\r\n            hold_entity: mainRaw.hold_entity || mainRaw.tap_entity,\r\n            temp_sensor: mainRaw.temp_sensor,\r\n            humidity_sensor: mainRaw.humidity_sensor,\r\n        };\r\n        const ac = h.ac || {};\r\n        const thermostat = h.thermostat || {};\r\n        ids.push(main === null || main === void 0 ? void 0 : main.tap_entity, main === null || main === void 0 ? void 0 : main.hold_entity, main === null || main === void 0 ? void 0 : main.temp_sensor, main === null || main === void 0 ? void 0 : main.humidity_sensor, ac === null || ac === void 0 ? void 0 : ac.entity, thermostat === null || thermostat === void 0 ? void 0 : thermostat.entity);\r\n        const rows = (c.switch_rows || []);\r\n        rows.forEach((row) => {\r\n            var _a;\r\n            const items = Array.isArray(row) ? row : (Array.isArray((_a = row) === null || _a === void 0 ? void 0 : _a.row) ? row.row : []);\r\n            items.forEach((sw) => ids.push(sw === null || sw === void 0 ? void 0 : sw.entity, sw === null || sw === void 0 ? void 0 : sw.hold_entity));\r\n        });\r\n        const bad = new Set(['unavailable', 'unknown', 'offline']);\r\n        return ids.some((id) => {\r\n            var _a, _b;\r\n            if (!id)\r\n                return false;\r\n            const st = (_b = (_a = this.hass) === null || _a === void 0 ? void 0 : _a.states) === null || _b === void 0 ? void 0 : _b[id];\r\n            const s = ((st === null || st === void 0 ? void 0 : st.state) || '').toLowerCase();\r\n            return bad.has(s);\r\n        });\r\n    }\r\n};\r\nBitosomeRoomCard.styles = css `\n    :host { display:block; }\n    .metrics, .metrics * { box-sizing: border-box; }\n\n    .metrics {\n      --ac-therm-icon: 50px;\n    }\n\n    ha-card {\n      border-radius: 16px;\n      background: linear-gradient(\n        180deg,\n        rgba(var(--rgb-card-background-color, 255,255,255), 0.92),\n        rgba(var(--rgb-card-background-color, 250,250,250), 0.85)\n      );\n      box-shadow: 0 10px 30px var(--panel-shadow-color);\n      padding: 12px;\n      color: var(--primary-text-color);\n      transition: filter 0.12s ease, box-shadow 0.12s ease;\n    }\n    ha-card.unavailable {\n      animation: cardPulse 2.8s ease-in-out infinite;\n    }\n\n    .root { display: grid; gap: 12px; }\n\n    /* Header row */\n    .header-row {\n      display: grid;\n      grid-template-columns: 1fr auto auto;\n      gap: 12px;\n      align-items: stretch;\n    }\n    .header-row.only-main { grid-template-columns: 1fr; }\n    .header-row.main-plus-one { grid-template-columns: 1fr auto; }\n    .header-row > * { height: var(--tile-h); }\n\n    /* MAIN tile */\n    .main-tile {\n      position: relative;\n      height: var(--tile-h);\n      border-radius: 12px;\n      box-shadow: 0 6px 18px rgba(0,0,0,0.10);\n      background: var(--ha-card-background, var(--card-background-color));\n      padding-left: 16px;\n      overflow: hidden;\n      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;\n    }\n    .main-icon {\n      position: absolute; left: 12px; top: 8px;\n      width: var(--main-icon-size, 48px); height: var(--main-icon-size, 48px); line-height: 0;\n      --mdc-icon-size: var(--main-icon-size, 48px);\n      color: var(--primary-text-color);\n    }\n    .chip-tr {\n      position: absolute; right: 8px; top: 8px; z-index: 3;\n      display: inline-flex; align-items: center; gap: 2px;\n      padding: 2px 6px; border-radius: 999px;\n      background: rgba(0,0,0,0.06);\n      font-size: var(--chip-font-size, 12px); color: var(--secondary-text-color); line-height: 1; white-space: nowrap;\n    }\n    .chip-tr ha-icon { width: 10px; height: 10px; line-height:0; --mdc-icon-size:10px; }\n    .chip-tr .tval, .chip-tr .hval { font-weight: 700; }\n\n    /* badge basics (bulb/lock/gate) */\n    .badge {\n      width: var(--badge); height: var(--badge);\n      border-radius: 999px;\n      display:flex; align-items:center; justify-content:center;\n      line-height:0;\n      background: rgba(0,0,0,0.06);\n    }\n    .badge ha-icon {\n      --mdc-icon-size: var(--badge-icon);\n      width: var(--badge-icon); height: var(--badge-icon);\n      display:block; margin:0; padding:0; line-height:0;\n      pointer-events:none;\n      color: var(--secondary-text-color);\n    }\n    .main-badges-br {\n      position: absolute; right: 8px; bottom: 8px; z-index: 3;\n      display: inline-flex; align-items: center; justify-content: flex-end;\n      gap: 6px; flex-wrap: wrap; max-width: calc(100% - 16px);\n    }\n    .main-name {\n      position: absolute; left: 12px; bottom: 8px;\n      font-weight: 500; font-size: 14px; color: var(--primary-text-color);\n    }\n\n    /* AC & THERMOSTAT squares — width == height == --tile-h */\n    .square {\n      position: relative;\n      width: var(--tile-h); height: var(--tile-h);\n      aspect-ratio: 1 / 1;\n      border-radius: 12px;\n      background: var(--card-background-color);\n      backdrop-filter: blur(10px);\n      transition: transform 0.18s ease, box-shadow 0.28s ease, filter 0.12s ease;\n      box-shadow: 0 6px 18px rgba(0,0,0,0.10);\n      overflow: hidden;\n      display: grid; place-items: center;\n    }\n\n    .center-xy { position: static; transform: none; display:flex; align-items:center; justify-content:center; pointer-events:none; user-select:none; line-height:0; }\n    .ac-fan, .thermo-icon {\n      width: var(--ac-therm-icon);\n      height: var(--ac-therm-icon);\n      --mdc-icon-size: var(--ac-therm-icon);\n      display: block; margin: 0; padding: 0; line-height: 0; transform-origin: 50% 50%; pointer-events: none;\n    }\n\n    /* AC mode badge (top-right) */\n    .badge-tr { position: absolute; right: 8px; top: 8px; z-index: 3; }\n\n    /* Thermostat temp chip (top-right) */\n    .temp-chip-tr { position: absolute; right: 8px; top: 8px; z-index: 3; display:inline-flex; align-items:center; }\n    .temp-pill { display:inline-flex; align-items:center; justify-content:center; padding: 0 6px; border-radius: 999px; background:#ff7043; font-size: var(--chip-font-size, 12px); color:#fff; line-height:1; white-space:nowrap; font-weight:700; max-width: calc(var(--tile-h) - 16px); min-height: var(--badge); }\n\n    /* Animations */\n    @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }\n    @keyframes activePulse {\n      0%   { box-shadow: 0 10px 20px var(--pulse-weak); transform: translateY(0) scale(1); }\n      45%  { box-shadow: 0 28px 56px var(--pulse-strong); transform: translateY(-1px) scale(1.02); }\n      100% { box-shadow: 0 10px 20px var(--pulse-weak); transform: translateY(0) scale(1); }\n    }\n    @keyframes heatingGlow {\n      0%   { box-shadow: 0 6px 18px rgba(0,0,0,0.10); }\n      50%  { box-shadow: 0 0 30px rgba(255,112,67,0.32); }\n      100% { box-shadow: 0 6px 18px rgba(0,0,0,0.10); }\n    }\n    @keyframes cardPulse {\n      0%   { box-shadow: 0 10px 30px var(--panel-shadow-color); }\n      50%  { box-shadow: 0 10px 30px var(--panel-shadow-color), 0 0 36px var(--unavail-strong); }\n      100% { box-shadow: 0 10px 30px var(--panel-shadow-color); }\n    }\n\n    /* Switch rows */\n    .switch-row { display:grid; grid-template-columns: repeat(var(--cols,3), 1fr); gap: 12px; }\n    .switch-tile {\n      position: relative;\n      height: var(--tile-h);\n      border-radius: 12px;\n      background: var(--card-background-color);\n      box-shadow: 0 6px 18px rgba(0,0,0,0.10);\n      transition: transform 0.12s ease, box-shadow 0.12s ease, filter 0.12s ease;\n      display: grid; place-items: center;\n      color: var(--secondary-text-color);\n    }\n    /* (Removed) embedded card styles */\n    /* Native-like hover feedback per-tile: slight lift + stronger shadow */\n    .main-tile:hover,\n    .square:hover,\n    .switch-tile:hover {\n      filter: brightness(1.03);\n      transform: translateY(-1px);\n      box-shadow: 0 12px 24px rgba(0,0,0,0.16);\n    }\n    .tile-inner { display:grid; gap:4px; place-items:center; justify-items:center; text-align:center; }\n    .switch-tile .name { font-weight: 600; font-size: 12px; }\n    .switch-icon { width: 28px; height: 28px; color: var(--secondary-text-color); line-height:0; }\n\n    /* ON base style */\n    .switch-tile.on {\n      background: var(--primary-color);\n      color: var(--primary-background-color);\n      transform: translateY(2px);\n      box-shadow:\n        inset 0 6px 14px rgba(0,0,0,0.20),\n        0 18px 40px rgba(255,193,7,0.30),\n        0 6px 18px rgba(255,193,7,0.16);\n      filter: drop-shadow(0 18px 32px rgba(255,193,7,0.22));\n      z-index: 2;\n    }\n    .switch-tile.on .switch-icon { color: var(--primary-background-color); }\n\n    /* Smart plug: animated band + GREEN glow (not yellow) */\n    @keyframes chase {\n      0%   { background-position: -150% 0, 0 0; }\n      50%  { background-position: 50% 0, 0 0; }\n      100% { background-position: 250% 0, 0 0; }\n    }\n    .switch-tile.smart.on {\n      background:\n        linear-gradient(90deg, rgba(0,200,83,0.00) 0%, rgba(0,200,83,0.45) 50%, rgba(0,200,83,0.00) 100%),\n        var(--primary-color);\n      background-size: 30% 100%, 100% 100%;\n      background-repeat: no-repeat;\n      animation: chase 2s linear infinite;\n\n      /* Override the yellow base glow with GREEN */\n      box-shadow:\n        inset 0 6px 14px rgba(0,0,0,0.20),\n        0 18px 40px rgba(0,200,83,0.30),\n        0 6px 18px rgba(0,200,83,0.16);\n      filter: drop-shadow(0 18px 32px rgba(0,200,83,0.22));\n    }\n\n    .clickable { cursor: pointer; }\n  `;\r\n__decorate([\r\n    property({ attribute: false })\r\n], BitosomeRoomCard.prototype, \"hass\", void 0);\r\n__decorate([\r\n    state()\r\n], BitosomeRoomCard.prototype, \"_config\", void 0);\r\nBitosomeRoomCard = BitosomeRoomCard_1 = __decorate([\r\n    customElement('bitosome-room-card')\r\n], BitosomeRoomCard);\r\nexport { BitosomeRoomCard };\r\nwindow.customCards = window.customCards || [];\r\nwindow.customCards.push({\r\n    type: 'bitosome-room-card',\r\n    name: 'Room card',\r\n    description: 'Room control card',\r\n    preview: false,\r\n    version: CARD_VERSION,\r\n});\r\n// Fancy console banner (logs once)\r\ntry {\r\n    const w = window;\r\n    if (!w.__BITOSOME_ROOM_CARD_LOGGED__) {\r\n        const l1 = 'background:#3f51b5;color:#fff;padding:2px 6px;border-radius:4px 0 0 4px;font-weight:700';\r\n        const l2 = 'background:#e0e0e0;color:#111;padding:2px 6px;border-radius:0 4px 4px 0;';\r\n        // eslint-disable-next-line no-console\r\n        console.info(`%cbitosome-room-card%c v${CARD_VERSION} loaded`, l1, l2);\r\n        w.__BITOSOME_ROOM_CARD_LOGGED__ = true;\r\n    }\r\n}\r\ncatch (e) { /* no-op */ }\r\nexport default BitosomeRoomCard;\r\n","references":["/Users/arku02/Repositories/room-card/node_modules/lit/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/lit/decorators.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/src/action-handler-directive.ts","/Users/arku02/Repositories/room-card/src/const.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts","/Users/arku02/Repositories/room-card/node_modules/custom-card-helpers/dist/index.d.ts"]}
